---
title : 'vessel'
output : html_document
---

```{r setup, include = FALSE}

knitr::opts_chunk$set(message = FALSE, warning = FALSE)

```

# vessel.Rmd
#
# William John Zywiec
# The George Washington University
#
# ...

```{r}

# initialize environment
if (!is.null(dev.list())) dev.off()
rm(list = ls())
cat('\014')

```

```{r}

# load packages
library(magrittr)

# set source and test directories
# source.dir <- 'C:/Users/Will/Dropbox/Dissertation/R/main'
source.dir <- 'E:/Dissertation/R/main'
test.dir <- 'E:/test'

# set variables
ensemble.size <- 10
sample.size <- 1e+06
risk.pool <- 10

# load function
source(paste0(source.dir, '/tabulate.R'))

setwd(test.dir)

# tabulate data
data.set <- Tabulate(source.dir)

```

```{r}

# load function
source(paste0(source.dir, '/nn.R'))

setwd(test.dir)

# build ensemble model
ensemble.model <- NN(data.set, ensemble.size, source.dir, test.dir)

```

```{r}

# load function
source(paste0(source.dir, '/bn.R'))
setwd('E:/dist')

# build Bayesian network
bn <- BN()

```

```{r}

# load function
source(paste0(source.dir, '/risk.R'))

bn.data <- list()

# estimate risk
for (i in 1:risk.pool) {
  bn.data[[i]] <- Risk(bn, data.set, ensemble.model, ensemble.size, sample.size)
}

```
